{% extends "base.html" %}
{% block title %}Social Media Assistant{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="max-w-6xl mx-auto px-6 mt-6">
  <h1 class="text-2xl font-bold text-blue-800 mb-2">📲 Social Media Assistant</h1>
  <p class="text-gray-700 text-sm mb-4">
    Create high-performing content for your real estate brand. Use the tools below to post smarter, faster, and with confidence.
  </p>
</div>

<!-- Tools Grid -->
<div class="max-w-6xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-6">

  <!-- Today’s Post -->
  <div class="bg-white rounded-2xl shadow-xl p-6">
    <h2 class="text-xl font-semibold text-blue-800 mb-2">📅 Today’s Post</h2>

    <button id="generateDailyPostBtn" class="btn btn-primary w-full mb-3">✨ Generate Today’s Post</button>

    {% if not session.get('is_pro', False) %}
      <div id="usageCounter" class="text-sm text-gray-600 mb-2">Uses: <span>0</span> of 5</div>
    {% endif %}

    <div id="clientLoadingSpinner" class="hidden text-purple-600 text-sm animate-pulse mb-2">
      ⏳ Generating post...
    </div>

    <div id="clientReplyLockedMsg" class="hidden text-sm text-red-600 mb-2">
      🔒 Free post used.
      <button onclick="goPro()" class="underline">Upgrade to Pro</button>
    </div>

    <div id="clientReplyOutput" class="bg-white border border-gray-200 rounded-2xl p-5 mb-4 text-base text-gray-800 font-sans leading-7 shadow-sm whitespace-pre-wrap max-h-72 overflow-y-auto overflow-x-auto"></div>

    <div class="flex gap-2">
      <button id="saveBtn" class="btn-mini">💾 Save</button>
      <button id="copyBtn" class="btn-mini">📋 Copy</button>
      <button id="regenerateClientReplyBtn" class="btn btn-primary opacity-50 cursor-not-allowed" title="Regenerate coming soon" disabled>
        🔁 Regenerate
      </button>
    </div>
  </div>

  <!-- Caption Rewriter -->
  <div class="bg-white rounded-2xl shadow-xl p-6">
    <h2 class="text-xl font-semibold text-blue-800 mb-2">✍️ Caption Rewriter</h2>

    <select id="platformSelect" class="w-full border rounded px-3 py-2 mb-2">
      <option value="Instagram">Instagram</option>
      <option value="Facebook">Facebook</option>
      <option value="LinkedIn">LinkedIn</option>
      <option value="Twitter">Twitter</option>
      <option value="TikTok">TikTok</option>
    </select>

    <textarea id="captionInput" rows="3" placeholder="Paste your caption to rewrite..." class="w-full border rounded p-2 text-sm mb-2"></textarea>

    <div class="flex gap-2 mb-3">
      <button id="rewriteCaptionBtn" class="btn btn-primary flex-1">✨ Rewrite Caption</button>
      <button id="randomCaptionBtn" class="btn btn-secondary flex-1">🎲 Generate Random</button>
    </div>

    <pre id="captionOutput" class="bg-white border border-gray-200 rounded-2xl p-4 mt-3 text-base text-gray-800 font-sans leading-7 shadow-sm whitespace-pre-wrap max-h-60 overflow-y-auto overflow-x-auto"></pre>

    <div class="flex justify-end mt-2">
      <button id="copyCaptionBtn" class="btn-mini">📋 Copy Caption</button>
      <button id="saveCaptionBtn" class="btn-mini">💾 Save Caption</button>
    </div>
  </div>

  <!-- Weekly Post Planner -->
  <div class="bg-white rounded-2xl shadow-xl p-6 md:col-span-2">
    <h2 class="text-xl font-semibold text-blue-800 mb-2">🗓️ Weekly Post Planner</h2>
    <p class="text-gray-700 text-sm mb-4">
      Plan your content calendar with 7 themed post ideas. Designed for batching, consistency, and creativity.
    </p>

    <div class="flex justify-start mb-4">
      <button id="generateWeeklyPlanBtn" class="btn btn-primary text-sm">🧠 Generate Weekly Plan</button>
    </div>

    <div id="weeklyPlanOutput" class="bg-white border border-gray-200 rounded-xl p-4 text-base text-gray-800 font-sans leading-7 shadow-sm whitespace-pre-wrap max-h-96 overflow-y-auto overflow-x-auto"></div>

    <div class="flex justify-end mt-2">
      <button id="copyWeeklyBtn" class="btn-mini">📋 Copy Weekly Plan</button>
      <button id="saveWeeklyBtn" class="btn-mini">💾 Save Weekly Plan</button>
    </div>
  </div>
</div>

<!-- Fallback if JS is disabled -->
<noscript class="text-red-600 text-sm mt-6 block text-center">
  ⚠️ Please enable JavaScript to use the Social Media Assistant.
</noscript>

<script src="{{ url_for('static', filename='js/social.js') }}" defer></script>
{% endblock %}
